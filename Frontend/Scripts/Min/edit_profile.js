function change_password(){old_password=$("#old_password").val(),new_password=$("#new_password").val(),$.ajax({type:"GET",url:"/func/change_password/",data:{old_password:old_password,new_password:new_password},success:function(){popup.hide(),notification.change("success","Успешно","Пароль изменен")}})}function create_contact(){contact_type=$("#new_contact_type").val(),contact_info=$("#new_contact_info").val(),console.log("create_contact"),$.ajax({type:"GET",url:"/func/create_contact/",data:{contact_type:contact_type,contact_info:contact_info},success:function(){popup.hide(),notification.change("success","Успешно","Контакт добавлен")}}),add_contact("<div class='card-contacts__item'><h5>"+contact_type+"</h5><span id='"+contact_type+"'>"+contact_info+"</span></div>"),popup.hide()}function add_contact(t){t=$(t),$("#contacts").append($(t)),$(t).children("span").attr("contenteditable","true").css("border-bottom","1px dashed #2196F3")}function upload_avatar(t){var a=t.target.files[0],n=new FormData;n.append("new_avatar",a),n.append("csrfmiddlewaretoken","{{ csrf_token }}"),console.log(n),$.ajax({type:"POST",url:"/func/upload_avatar/",data:n,processData:!1,contentType:!1,success:function(){notification.change("success","Успешно","Данные были успешно изменены")}})}$(document).ready(function(){function t(){n?($("#do_not_save").css("opacity","0"),setTimeout(function(){$("#do_not_save").hide()},300),$("#edit>.card--small").text("Редактировать"),$("[contenteditable]").attr("contenteditable","false").css("border-bottom","1px dashed transparent"),$("#add_contact").css("transform","scale(0)"),n=!1):($("#do_not_save").show(),$("#do_not_save").css("opacity","1"),$("#edit>.card--small").text("Сохранить изменения"),$(".card-contacts__item>span").attr("contenteditable","true").css("border-bottom","1px dashed #2196F3"),$("#add_contact").css("transform","scale(1)"),n=!0)}function a(){$("#email").html()?email=$("#email").html():email=null,$("#Skype").html()?Skype=$("#Skype").html():Skype=null,$("#VK").html()?VK=$("#VK").html():VK=null,$("#Facebook").html()?Facebook=$("#Facebook").html():Facebook=null,$("#Dnevnik").html()?Dnevnik=$("#Dnevnik").html():Dnevnik=null,$("#Codeforces").html()?Codeforces=$("#Codeforces").html():Codeforces=null,$.ajax({type:"GET",url:"/func/change_data/",data:{email:email,Skype:Skype,VK:VK,Facebook:Facebook,Dnevnik:Dnevnik,Codeforces:Codeforces},success:function(){notification.change("success","Успешно","Данные были успешно изменены")}})}$(".card-contacts__item>span").css("border-bottom","1px dashed transparent"),$("#do_not_save").hide(),$("body").append(o);var n=!1;$("#edit").click(function(o){n&&a(),t()}),$("#do_not_save").click(function(a){t()});var o=$("<input hidden type='file'>");$("#change_avatar").click(function(t){o.click()}),o.change(function(t){upload_avatar(t)}),$("#add_contact").click(function(t){function a(){var t=["Skype","Codeforces","VK","Facebook","Dnevnik"],a="";return t.forEach(function(t){a+="<option value='"+t+"'>"+t+"</option>"}),a}popup.show("<div class='select'><div class='display'>Skype</div><input type='hidden' id='new_contact_type'><svg class='{{ class }}' id='{{id}}' viewBox='0 0 24 24'  xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>"+a()+"</div><br><input type='text' id='new_contact_info'><label for='new_contact_info'>Контакная информация</label><br><button class='button--ghost' id='create_contact' onclick='create_contact()' style='float:right'>Добавить</button>",{"padding-bottom":"0.3rem",width:"20rem"},function(){add_menu_caller($("#popup").children(".select").get(0))})}),$("#change-password").click(function(t){popup.show("<input type='password' value='' id='old_password' pattern='.{8,}'><label>Старый пароль</label><br><input type='password' id='new_password' pattern='.{8,}'><label>Новый Пароль</label><br><button class='button--ghost' onclick='change_password()' style='float:right'>Сменить</button>",{"padding-top":"0.3rem","padding-bottom":"0.3rem",width:"20rem"},function(){$("#popup").children("input")[0].focus()})})});