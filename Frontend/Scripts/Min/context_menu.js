function add_menu_caller(t){$(t).click(function(t){var e=this,n=[],c={};$(e).children("option").each(function(t,i){$(this).attr("value")!=$(e).val()?n.push({text:$(this).text(),value:$(this).attr("value")}):c={text:$(this).text(),value:$(this).attr("value")}}),console.log(this),context_menu.show(this,n,c)}),t.addEventListener("click",function(t){t.preventDefault();var e=this;e.style.visibiliy="hidden",setTimeout(function(){e.disabled=!1},0)})}context_menu={show:function(t,e,n){context_menu.is_shown&&context_menu.hide(),c_rect=t.getBoundingClientRect(),n?context_menu.build_select(t,e,n):context_menu.build(e),$("#context-menu").css({top:c_rect.top+"px",left:c_rect.left+"px",width:c_rect.width+"px",opacity:1})},hide:function(){$("#context-menu").css("opacity","0"),setTimeout(function(){$("#context-menu").css("top","-100%")},300)},build:function(t){$("#context-menu").html(""),t.forEach(function(t){$("#context-menu").append("<div class='context-menu__option' onclick='"+t.func+"()'>"+t.text+"</div>")})},build_select:function(t,e,n){$("#context-menu").html(""),$("#context-menu").append("<div class='context-menu__option default' onclick='"+n.value+"()'>"+n.text+"</div>"),e.forEach(function(t){$("#context-menu").append("<div class='context-menu__option' value='"+t.value+"'>"+t.text+"</div>")}),$(".context-menu__option").click(function(e){context_menu.hide(),$(t).val($(this).attr("value")),console.log(t,$(this).attr("value"))})}},$(document).ready(function(){$("select").each(function(t,e){add_menu_caller(this)})});