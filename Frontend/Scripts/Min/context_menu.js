function add_menu_caller(t){var e=$(t).children("option").get(0);e=$(e),$(t).children("input").val(e.attr("value")),$(t).children(".display").text(e.text()),$(t).click(function(t){var e=[],n={},c=$(this).children("input").val();$(this).children("option").each(function(t,i){$(this).attr("value")!=c?e.push({text:$(this).text(),value:$(this).attr("value")}):n={text:$(this).text(),value:$(this).attr("value")}}),context_menu.show(this,e,n)})}context_menu={show:function(t,e,n){context_menu.is_shown&&context_menu.hide(),c_rect=t.getBoundingClientRect(),n?context_menu.build_select(t,e,n):context_menu.build(e),$("#context-menu").css({top:c_rect.top+"px",left:c_rect.left+"px",opacity:1})},hide:function(){$("#context-menu").css("opacity","0"),setTimeout(function(){$("#context-menu").css("top","-100%")},300)},build:function(t){$("#context-menu").html(""),t.forEach(function(t){$("#context-menu").append("<div class='context-menu__option' onclick='"+t.func+"()'>"+t.text+"</div>")})},build_select:function(t,e,n){$("#context-menu").html(""),$("#context-menu").append("<div class='context-menu__option default' onclick='"+n.value+"()'>"+n.text+"</div>"),e.forEach(function(t){$("#context-menu").append("<div class='context-menu__option' value='"+t.value+"'>"+t.text+"</div>")}),$(".context-menu__option").click(function(e){context_menu.hide(),$(t).children("input").val($(this).attr("value")),$(t).children(".display").text($(this).text())})}},$(document).ready(function(){$(".select").each(function(t,e){add_menu_caller(this)})});