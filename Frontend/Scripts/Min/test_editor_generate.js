var generate={queued_el:$("<div>Ждем-с</div>"),quesiton_template:"<div draggable='true'></div>",answer_template:function(e){return"<div class='"+e+" task__answer__item' draggable='true'></div>"},texts:{"text-wrapper":"<input type='text' id='new_el_value'><label>Текст вопроса</label><br><br><button id='add_el'>Добавить</button>","image-wrapper":"<input type='text' id='new_el_value'><label>URL артинки</label><br><br><div class='file'><button>Выбрать</button><span>Файл не выбран</span><input type='file'></div><br><br><button id='add_el'>Добавить</button>","text-answer":"<input type='text' id='new_el_value'><label>Вопрос</label><br><br><input type='text' id='new_el_answer'><label>Верный ответ</label><br><br><button id='add_el'>Добавить</button>","select-answer":"<ul class='select-option-list'><li><input type='radio' name='right_answer' checked id='option_1'><label for='option_1'></label><div><input type='text'><label>Вариант ответа</label></div></li></ul><button class='button--icon' id='add_option'><svg  viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path d='M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z'/><path d='M0 0h24v24H0z' fill='none'/></svg></button><br><button id='add_el'>Добавить</button>"},"text-wrapper":function(e,t){var a=$(generate.quesiton_template);if(e)var n=a.addClass("text-wrapper").html(e);else{popup.show(generate.texts["text-wrapper"],{},function(){t&&$("#new_el_value").val(t.text()),$("#add_el, #popup__close").click(function(e){popup.hide(),c_element=generate["text-wrapper"]($("#new_el_value").val()),generate.queued_el.replaceWith(c_element),add_boundary.draggable(c_element),add_boundary.question(c_element)})});var n=generate.queued_el}return console.log(n),n},"image-wrapper":function(e,t){var a=$(generate.quesiton_template);if(e)var n=a.addClass("image-wrapper").append("<img src="+e+">");else{popup.show(generate.texts["image-wrapper"],{},function(){t&&$("#new_el_value").val(t.find("img").attr("src")),$("#add_el, #popup__close").click(function(e){popup.hide(),""!=$("#new_el_value").val()&&(c_element=generate["image-wrapper"]($("#new_el_value").val()),generate.queued_el.replaceWith(c_element),add_boundary.draggable(c_element),add_boundary.question(c_element))})});var n=generate.queued_el}return console.log(n),n},"text-answer":function(e,t,a){if(e)var n=$(generate.answer_template("text-answer")).attr("answer",t).html("<input type='text' placeholder='Ответ' disabled><label>"+e+"</label>");else{popup.show(generate.texts["text-answer"],{},function(){a&&($("#new_el_value").val(a.find("label").text()),$("#new_el_answer").val(a.attr("answer"))),$("#add_el, #popup__close").click(function(e){popup.hide(),console.log("add"),c_element=generate["text-answer"]($("#new_el_value").val(),$("#new_el_answer").val()),generate.queued_el.replaceWith(c_element),add_boundary.draggable(c_element),add_boundary.answer(c_element)})});var n=generate.queued_el}return n},"file-answer":function(){var e=$(generate.answer_template("file-answer")).html("<div class='file'><button>Выбрать</button><span>Файл не выбран</span><input type='file'></div></div>");return add_boundary.draggable(e),add_boundary.answer(e),e},"select-answer":function(e,t,a){if(e){var n=$(generate.answer_template("select-answer")).html("<div class='select'><input type='hidden' class='value' value='1'><div class='display'>"+e[0]+"</div><svg class='{{ class }}' id='{{id}}' viewBox='0 0 24 24'  xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>"),l=$(n).find(".select"),r=1;e.forEach(function(e){l.append("<option value='"+r+"'>"+e+"</option>"),r++}),n.attr("answer",t),add_menu_caller(l)}else{popup.show(generate.texts["select-answer"],{width:"21rem"},function(){a&&($("#new_el_value").val(a.find("label").text()),$("#new_el_answer").val(a.attr("answer")));var e=1;$("#add_option").click(function(t){e++,$(".select-option-list").append("<li><input type='radio' name='right_answer' id='option_"+e+"'><label for='option_"+e+"'></label><div><input type='text'><label>Вариант ответа</label></div></li>")}),$("#add_el, #popup__close").click(function(e){popup.hide(),console.log("add");var t=[],a="";$("#popup li").each(function(e,n){var l=$(this).find("input[type='text']").val();$(this).children("input[type='radio']").is(":checked")&&(a=l),t.push(l)}),console.log(t),c_element=generate["select-answer"](t,a),generate.queued_el.replaceWith(c_element),add_boundary.draggable(c_element),add_boundary.answer(c_element)})});var n=generate.queued_el}return n},task:function(e){var t=$(task_template);t.find(".task__number").text(tasks+"."),add_boundary.new_task(t.find(".task__number")),t.find(".block--empty").each(function(e,t){add_boundary.block_empty($(this))}),$(".test__preview").append(t),t.find(".task__question").html(""),t.find(".task__answer").html(""),e.answer_items.forEach(function(e){if(console.log(e["class"]),"block--empty"==e["class"]){var a=$("<div class='block--empty'>Добавьте сюда поле ответа</div>");t.append(),add_boundary.block_empty(a)}else{var a=generate[e["class"]](e.label,e.answer);t.find(".task__answer").append(a),add_boundary.draggable(a),add_boundary.answer(a)}}),e.question_items.forEach(function(e){if(console.log(e["class"]),"block--empty"==e["class"]){var a=$("<div class='block--empty'>Добавьте сюда вопрос</div>");t.append(),add_boundary.block_empty(a)}else{var a=generate[e["class"]](e.value);console.log(a,t.find(".task__question")),t.find(".task__question").append(a),console.log(t.find(".task__question")),add_boundary.draggable(a),add_boundary.question(a)}}),editor.verify_type(),editor.check_for_emptiness(),check_bg_height()}};