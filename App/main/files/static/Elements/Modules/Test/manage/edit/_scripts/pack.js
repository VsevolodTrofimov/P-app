function upload_file(e,a){var t=test_manager.upload_queue.add(),o=new FormData;o.append("file",e),o.append("path","courses/"+django.course.id+"/assets/"+django.type+"/"),o.append("csrfmiddlewaretoken",django.csrf_token),$.ajax({type:"POST",url:"/func/upload/",data:o,processData:!1,contentType:!1,success:function(e){test_manager.upload_queue.remove(t),console.log(e),a(e)},error:function(a){test_manager.upload_queue.remove(t),notification.show("error","Ошбика при загрузке "+e.name),test_manager.upload_queue.error=!0}})}test_manager.look_for_files=function(e){e.forEach(function(e){defined(e.asset_id)&&(editor.assets.get(e.asset_id).files?upload_file(editor.assets.get(e.asset_id).files[0],function(a){e.url=a,e.asset_id=void 0}):e.asset_id=void 0)})},test_manager.pack=function(e){test_manager.packed_test=e,e.templates.forEach(function(e){test_manager.look_for_files(e.parts)}),e.tasks.forEach(function(e){e.is_template?test_manager.look_for_files(e.parts):test_manager.look_for_files(e.content)})};