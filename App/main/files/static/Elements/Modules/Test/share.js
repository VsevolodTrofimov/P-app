var share={ajax:{},display:{},edit:{},search:{},current_id:""};$(document).ready(function(){}),share.ajax.edit=function(e){},share.ajax.share=function(e){console.log("SHOULD HAVE SHARED",e)},share.ajax.unshare=function(e){},share.display.hide=function(){},share.display.show=function(e){},share.edit.get_defaults=function(){return{share_id:!1,open:!1,description:"",tags:{main:[],subject:[]},assets:{test:!1,material:!1,template:[]}}},share.edit.parse=function(e){var t=share.edit.get_defaults();if(!e)return console.log("NOTING TO PARSE"),t;var a=e.find('*[name="overall-tags"]').val(),n=e.find('*[name="subject-tags"]').val();return t.tags.main=a.replace(", ",",").split(","),t.tags.subject=n.replace(", ",",").split(","),t.description=e.find(".__text.__value").html(),t.open=e.find(".__open")[0].checked,e.find(".share_test input")[0]&&e.find(".share_test input")[0].checked&&(t.assets.test=django.test.id),e.find(".share_material input")[0]&&e.find(".share_material input")[0].checked&&(t.assets.material=django.material.id),t},function(){function e(e){var t=$('<div class="row"></div>'),a=$("<button>Добавить в открытую библиотеку</button>");return t.append(a),a.click(function(){var t=share.edit.parse(e);share.ajax.share(t),popup.hide()}),t}function t(e){var t=$('<div class="row></div>');return t.append("<button>Сохранить изменения</button>"),t.append('<button class="m--ghost">Добавить как новое</button>'),t.append('<button class="m--ghost" class="m--negative"> Удалить </button>'),t}function a(e){function t(e){for(var t,n=$("<div></div>"),s=0;s<e.length;s++)a.has(e[s].group)||(a.push(e[s].group),t=$(loads.get("Elements/Inputs/checkbox/")),t.find("label").html(e[s].group),n.append(t));return n}var a=[],n=$("<div></div>"),s=$(loads.get("Elements/Inputs/checkbox/"));return"test"===django.current_type?(s.find("label").html("Тест"),s.addClass("share_test")):(s.find("label").html("Материал"),s.addClass("share_material")),n.append(s),n.append(t(editor.test_data.templates)),n.append(t(e.assets.template)),n}function n(n){var s=$(loads.get("Elements/Modules/Test/share/__popup_texts/__edit/")),i=s.find(".__text.__value");return i.html(n.description),check_if_filled(i),inline_editor.start(i[0]),s.find(".__specification").html(a(n)),s.find(".__tags>.__overall").append(render.inputs.text("Через запятую, не более 4","overall-tags",n.tags.main.join(", "))),s.find(".__tags>.__subject").append(render.inputs.text("Через запятую, не более 4","subject-tags",n.tags.subject.join(", "))),n.share_id?s.find(".__actions").append(t(s)):s.find(".__actions").append(e(s)),s}share.edit.show=function(e){e||(e=share.edit.get_defaults());var t=n(e);popup.show(t)}}();