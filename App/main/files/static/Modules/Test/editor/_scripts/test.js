editor.test_data={title:"",tasks:[],templates:[],change:function(t,e,a){return t===e?editor.test_data.update(t,a):(editor.test_data.delete(t),void editor.test_data.tasks[e.task].content.splice(e.number,0,a))},update:function(t,e){editor.test_data.tasks[t.task].content[t.number]=e},add:function(t){editor.test_data.tasks.push({content:[t]})},add_template:function(t){t.is_template=!0,editor.test_data.tasks.push(t)},delete:function(t){defined(t)&&defined(t.task)&&editor.test_data.tasks[t.task].content.splice(t.number,1)},delete_task:function(t){editor.test_data.tasks.splice(t,1)},insert_task:function(t,e){editor.test_data.tasks.splice(t,0,{content:[e]})},templates_remove:function(t){editor.test_data.templates.splice(editor.test_data.templates.indexOf(t),1),$(".preview .__task.m--template").each(function(){var t=$(this),e=t.find(".__group").val();console.log("checking",this,"("+e+")","=>",editor.test_data.template_get_parts(e)),editor.test_data.template_get_parts(e)||t.find(".__serialize").click()})},template_get_parts:function(t){for(var e=0;e<editor.test_data.templates.length;e++)if(editor.test_data.templates[e].group===t)return editor.test_data.templates[e].parts;return!1}},editor.test_data.templates.save=function(t,e){t=JSON.parse(JSON.stringify(t)),console.log("saving",t,"as",e);for(var a=0;a<editor.test_data.templates.length;a++)editor.test_data.templates[a].group===e&&(editor.test_data.templates[a]=t,saved=!0)},editor.test_data.templates.add=function(t){var e=!1,a=t.group;console.log("adding",t),t=JSON.parse(JSON.stringify(t));for(var s=0;s<editor.test_data.templates.length;s++)editor.test_data.templates[s].group===t.group&&(e=!0);return e?(a+="+",t.group=a,editor.test_data.templates.add(t)):(editor.test_data.templates.push(t),a)},pull_put.pre_actions.put=function(t,e){if(!t.hasClass("__gap")){var a=editor.edit.change_value(),s=t.parent().children("[subtype]").index(t);s+=1;var i={task:$(".preview .__task").index(t.parents(".__task")),number:s};editor.test_data.change(editor.active_element.position,i,a)}},pull_put.pre_actions.save=function(){editor.edit.change_value();var t=editor.active_element.position,e=editor.active_element.value;editor.edit.stop(),$(".m--pull_put_empty").after(pull_put.ui.element),editor.test_data.update(t,e)},pull_put.pre_actions.delete=function(){editor.test_data.delete(editor.active_element.position)};